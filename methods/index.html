<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Методы | Cubic Vision Embedded Web</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/vision-embedded-web-docs/assets/css/0.styles.2a6de791.css" as="style"><link rel="preload" href="/vision-embedded-web-docs/assets/js/app.daaba0a2.js" as="script"><link rel="preload" href="/vision-embedded-web-docs/assets/js/2.eeb24f79.js" as="script"><link rel="preload" href="/vision-embedded-web-docs/assets/js/12.0c4596fd.js" as="script"><link rel="prefetch" href="/vision-embedded-web-docs/assets/js/10.c6096159.js"><link rel="prefetch" href="/vision-embedded-web-docs/assets/js/11.28cebd02.js"><link rel="prefetch" href="/vision-embedded-web-docs/assets/js/3.a3bc1a65.js"><link rel="prefetch" href="/vision-embedded-web-docs/assets/js/4.752b9ce9.js"><link rel="prefetch" href="/vision-embedded-web-docs/assets/js/5.e4342579.js"><link rel="prefetch" href="/vision-embedded-web-docs/assets/js/6.e86df8f9.js"><link rel="prefetch" href="/vision-embedded-web-docs/assets/js/7.fe8cb8c7.js"><link rel="prefetch" href="/vision-embedded-web-docs/assets/js/8.51d5b252.js"><link rel="prefetch" href="/vision-embedded-web-docs/assets/js/9.d36695e5.js">
    <link rel="stylesheet" href="/vision-embedded-web-docs/assets/css/0.styles.2a6de791.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vision-embedded-web-docs/" class="home-link router-link-active"><!----> <span class="site-name">Cubic Vision Embedded Web</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vision-embedded-web-docs/interfaces/" class="nav-link">
  Интерфейсы плеера
</a></div><div class="nav-item"><a href="/vision-embedded-web-docs/methods/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Методы
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vision-embedded-web-docs/interfaces/" class="nav-link">
  Интерфейсы плеера
</a></div><div class="nav-item"><a href="/vision-embedded-web-docs/methods/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Методы
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Методы</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vision-embedded-web-docs/methods/#методы-плеера" class="sidebar-link">Методы плеера</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vision-embedded-web-docs/methods/#событие-готовности" class="sidebar-link">Событие готовности</a></li><li class="sidebar-sub-header"><a href="/vision-embedded-web-docs/methods/#начать-проигрывание" class="sidebar-link">Начать проигрывание</a></li><li class="sidebar-sub-header"><a href="/vision-embedded-web-docs/methods/#приостановить-проигрывание" class="sidebar-link">Приостановить проигрывание</a></li><li class="sidebar-sub-header"><a href="/vision-embedded-web-docs/methods/#установить-состояние" class="sidebar-link">Установить состояние</a></li><li class="sidebar-sub-header"><a href="/vision-embedded-web-docs/methods/#уведомить-об-изменении-фаилов-виджета-folder-play" class="sidebar-link">Уведомить об изменении файлов виджета Folder play</a></li><li class="sidebar-sub-header"><a href="/vision-embedded-web-docs/methods/#уведомить-об-изменении-переменных-плеера" class="sidebar-link">Уведомить об изменении переменных плеера</a></li><li class="sidebar-sub-header"><a href="/vision-embedded-web-docs/methods/#создание-событии-для-веб-контента" class="sidebar-link">Создание событий для веб контента</a></li></ul></li><li><a href="/vision-embedded-web-docs/methods/#методы-веб-контента" class="sidebar-link">Методы веб контента</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vision-embedded-web-docs/methods/#работа-с-хранилищем-плеера" class="sidebar-link">Работа с хранилищем плеера</a></li><li class="sidebar-sub-header"><a href="/vision-embedded-web-docs/methods/#переход-между-сценами" class="sidebar-link">Переход между сценами</a></li><li class="sidebar-sub-header"><a href="/vision-embedded-web-docs/methods/#логирование" class="sidebar-link">Логирование</a></li><li class="sidebar-sub-header"><a href="/vision-embedded-web-docs/methods/#хуки-плеера" class="sidebar-link">Хуки плеера</a></li><li class="sidebar-sub-header"><a href="/vision-embedded-web-docs/methods/#приложение" class="sidebar-link">Приложение</a></li><li class="sidebar-sub-header"><a href="/vision-embedded-web-docs/methods/#фаиловая-система" class="sidebar-link">Файловая система</a></li><li class="sidebar-sub-header"><a href="/vision-embedded-web-docs/methods/#контеинеры" class="sidebar-link">Контейнеры</a></li><li class="sidebar-sub-header"><a href="/vision-embedded-web-docs/methods/#загрузка-фаилов" class="sidebar-link">Загрузка файлов</a></li><li class="sidebar-sub-header"><a href="/vision-embedded-web-docs/methods/#клавиатура" class="sidebar-link">Клавиатура</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="методы"><a href="#методы" class="header-anchor">#</a> Методы</h1> <h2 id="методы-плеера"><a href="#методы-плеера" class="header-anchor">#</a> Методы плеера</h2> <p>Плеер Cubic Vision вызывает методы встроенного веб контента для взаимодействия с ним</p> <h3 id="событие-готовности"><a href="#событие-готовности" class="header-anchor">#</a> Событие готовности</h3> <p>Необходимо дождаться события onWebContentReady, прежде чем можно будет вызывать методы у window.WebContent</p> <h3 id="начать-проигрывание"><a href="#начать-проигрывание" class="header-anchor">#</a> Начать проигрывание</h3> <p>При появлении элемента в контейнере начать воспроизведение</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token function">startPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code>window<span class="token punctuation">.</span>WebContent<span class="token punctuation">.</span><span class="token function">startPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="приостановить-проигрывание"><a href="#приостановить-проигрывание" class="header-anchor">#</a> Приостановить проигрывание</h3> <p>При скрытии элемента в контейнере закончить воспроизведение</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token function">stopPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code>window<span class="token punctuation">.</span>WebContent<span class="token punctuation">.</span><span class="token function">stopPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="установить-состояние"><a href="#установить-состояние" class="header-anchor">#</a> Установить состояние</h3> <p>Используется для уведомления веб контента о смене состояния виджета 'Кассовый чек'</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token function">setState</span><span class="token punctuation">(</span>channelName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> state<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> object<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
</code></pre></div><ul><li><strong>channelName</strong> - канал данных: <em>'MagnetCashbox' | 'ApiRequest' и тд</em></li> <li><strong>state</strong> - JSON строка или объект js с текущим состоянием</li></ul> <h3 id="уведомить-об-изменении-фаилов-виджета-folder-play"><a href="#уведомить-об-изменении-фаилов-виджета-folder-play" class="header-anchor">#</a> Уведомить об изменении файлов виджета Folder play</h3> <p>Используется для уведомления веб контента о изменении файлов виджета 'Folder play'</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token function">notifyFolderPlayUpdate</span><span class="token punctuation">(</span>dirPath<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
</code></pre></div><ul><li><strong>dirPath</strong> - путь к папке с файлами виджета 'Folder play'</li></ul> <h3 id="уведомить-об-изменении-переменных-плеера"><a href="#уведомить-об-изменении-переменных-плеера" class="header-anchor">#</a> Уведомить об изменении переменных плеера</h3> <p>Используется для уведомления веб контента о изменении переменных</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token function">notifyVarsChanged</span><span class="token punctuation">(</span>vars<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
</code></pre></div><ul><li><strong>vars</strong> - JSON строка следующего формата &quot;[{ &quot;name&quot;: &quot;var1&quot;, &quot;value&quot;: &quot;124:2&quot; }]&quot;</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>window<span class="token punctuation">.</span>WebContent<span class="token punctuation">.</span><span class="token function">notifyVarsChanged</span><span class="token punctuation">(</span><span class="token string">'[{ &quot;name&quot;: &quot;var1&quot;, &quot;value&quot;: &quot;124:2&quot; }]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="создание-событии-для-веб-контента"><a href="#создание-событии-для-веб-контента" class="header-anchor">#</a> Создание событий для веб контента</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token function">emit</span><span class="token punctuation">(</span>jsonData<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
</code></pre></div><ul><li><strong>jsonData</strong> это <code>{ type: string, payload: any }</code></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>window<span class="token punctuation">.</span>WebContent<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'&quot;{ &quot;type&quot;: &quot;example&quot;, &quot;payload&quot;: null }&quot;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="список-событии"><a href="#список-событии" class="header-anchor">#</a> Список событий:</h4> <ul><li>Сканирование:<br> <code>{ &quot;type&quot;: &quot;scan&quot;, &quot;payload&quot;: { barcode: &quot;Штрихкод&quot; } }</code></li></ul> <h2 id="методы-веб-контента"><a href="#методы-веб-контента" class="header-anchor">#</a> Методы веб контента</h2> <p>Встраиваемый в Cubic Vision веб контент может использовать данные методы для более удобной разработки связи с плеером. Методы библиотеки являются надстройкой над реализуемыми плеером интерфейсами. Главная цель - повторное переиспользование кода в веб проектах.</p> <p><strong>Установка библиотеки</strong>:<br> <code>npm i vision-embedded-web</code></p> <h3 id="работа-с-хранилищем-плеера"><a href="#работа-с-хранилищем-плеера" class="header-anchor">#</a> Работа с хранилищем плеера</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> playerStoradge <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vision-embedded-web'</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>playerStoradge.get</strong><br>
Получить распарсенные данные от плеера</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> parsed <span class="token operator">=</span> <span class="token keyword">await</span> playerStoradge<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'web-project1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>parsed<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null если нет в сторе</span>
</code></pre></div><p><strong>playerStoradge.getJSON</strong><br>
Получить JSON данные от плеера</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> json <span class="token operator">=</span> <span class="token keyword">await</span> playerStoradge<span class="token punctuation">.</span><span class="token function">getJSON</span><span class="token punctuation">(</span><span class="token string">'web-project1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'null' если нет в сторе</span>
</code></pre></div><p><strong>playerStoradge.set</strong><br>
Сохранить данные, работающие с <code>JSON.stringify</code> на плеере</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token string">'web-project1'</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> playerStoradge<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Ann'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> parsed <span class="token operator">=</span> <span class="token keyword">await</span> playerStoradge<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>parsed<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { name: 'Ann', age: 30 }</span>
</code></pre></div><p><strong>playerStoradge.setJSON</strong><br>
Сохранить JSON данные на плеере</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token string">'web-project1'</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> playerStoradge<span class="token punctuation">.</span><span class="token function">setJSON</span><span class="token punctuation">(</span>
  key<span class="token punctuation">,</span>
  <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Ann'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> parsed <span class="token operator">=</span> <span class="token keyword">await</span> playerStoradge<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>parsed<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { name: 'Ann', age: 30 }</span>
</code></pre></div><p><strong>playerStoradge.getVar</strong><br>
Получить значение переменной плеера</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> var1Value <span class="token operator">=</span> <span class="token keyword">await</span> playerStoradge<span class="token punctuation">.</span><span class="token function">getVar</span><span class="token punctuation">(</span><span class="token string">'var1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'var1 value'</span><span class="token punctuation">,</span> var1Value<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="переход-между-сценами"><a href="#переход-между-сценами" class="header-anchor">#</a> Переход между сценами</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> playerScenes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vision-embedded-web'</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>playerScenes.goToById</strong><br>
Изменить сцену на плерее на указанную (по id)</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>playerScenes<span class="token punctuation">.</span><span class="token function">goToById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Плеер перейдёт на сцену с id 1</span>
</code></pre></div><p><strong>playerScenes.goToPrevious</strong><br>
Перейти на предыдущую сцену. Без зацикливания, только на одну сцену назад.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>playerScenes<span class="token punctuation">.</span><span class="token function">goToById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Плеер перейдёт на сцену с id 1</span>
playerScenes<span class="token punctuation">.</span><span class="token function">goToById</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Плеер перейдёт на сцену с id 2</span>
playerScenes<span class="token punctuation">.</span><span class="token function">goToPrevious</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Плеер вернётся на сцену с id 1</span>
playerScenes<span class="token punctuation">.</span><span class="token function">goToPrevious</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Плеер останется на сцене с id 1.</span>
</code></pre></div><h3 id="логирование"><a href="#логирование" class="header-anchor">#</a> Логирование</h3> <p>Выводит логи на консоль и записывает в файл логов плеера за текущий день.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> playerLogger<span class="token punctuation">,</span> setCleanConsole <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vision-embedded-web'</span><span class="token punctuation">;</span>

<span class="token comment">// Если происходит слежение за логами из консоли и вызываются методы playerLogger</span>
<span class="token comment">// То нужно установить для vision-embedded-web console, которая не будет вызывать его</span>
<span class="token comment">// Необходимо чтобы предотвратить бесконечный цикл</span>
<span class="token comment">// setCleanConsole(console)</span>

playerLogger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">'Tick 1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
playerLogger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'Get data from player'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Ann'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
playerLogger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Error'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Test Error'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
playerLogger<span class="token punctuation">.</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token string">'Deprecated method call'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="хуки-плеера"><a href="#хуки-плеера" class="header-anchor">#</a> Хуки плеера</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> playerHooks <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vision-embedded-web'</span><span class="token punctuation">;</span>

<span class="token comment">// Создание интерфейса window.WebContent для плеера</span>
playerHooks<span class="token punctuation">.</span><span class="token function">createInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

playerHooks<span class="token punctuation">.</span><span class="token function">registerStartPlay</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Start play'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

playerHooks<span class="token punctuation">.</span><span class="token function">registerStopPlay</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Stop play'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">State</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
playerHooks<span class="token punctuation">.</span><span class="token function">registerSetState</span><span class="token punctuation">(</span><span class="token punctuation">(</span>channelName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> state<span class="token operator">:</span> State<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Set state'</span><span class="token punctuation">,</span> channelName<span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

playerHooks<span class="token punctuation">.</span><span class="token function">registerSetState</span><span class="token punctuation">(</span><span class="token punctuation">(</span>channelName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> state<span class="token operator">:</span> State<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Set state'</span><span class="token punctuation">,</span> channelName<span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Очистить предыдущее состояние, чтобы registerSetState мог сработать на тех же данных</span>
  playerHooks<span class="token punctuation">.</span><span class="token function">clearPrevState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

playerHooks<span class="token punctuation">.</span><span class="token function">registerFolderPlayUpdate</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dirPath<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Folder play updated'</span><span class="token punctuation">,</span> dirPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

playerHooks<span class="token punctuation">.</span><span class="token function">registerVarsChanged</span><span class="token punctuation">(</span><span class="token punctuation">(</span>vars<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Vars changed'</span><span class="token punctuation">,</span> vars<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

playerHooks<span class="token punctuation">.</span><span class="token function">registerVarChanged</span><span class="token punctuation">(</span><span class="token punctuation">(</span>varName<span class="token punctuation">,</span> varValue<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Var changed name: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>varName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, value: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>varValue<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

playerHooks<span class="token punctuation">.</span><span class="token function">registerWebContentEvent</span><span class="token punctuation">(</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">On web content event</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'scan'</span><span class="token punctuation">)</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Scan event'</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span>payload<span class="token punctuation">.</span>barcode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Вызвать в конце, для уведомления плеера о готовности к работе</span>
playerHooks<span class="token punctuation">.</span><span class="token function">notifyAboutRegisterEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="приложение"><a href="#приложение" class="header-anchor">#</a> Приложение</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> playerApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vision-embedded-web'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="фаиловая-система"><a href="#фаиловая-система" class="header-anchor">#</a> Файловая система</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> playerFilesystem <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vision-embedded-web'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="контеинеры"><a href="#контеинеры" class="header-anchor">#</a> Контейнеры</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> playerContainers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vision-embedded-web'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="загрузка-фаилов"><a href="#загрузка-фаилов" class="header-anchor">#</a> Загрузка файлов</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> playerDownload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vision-embedded-web'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="клавиатура"><a href="#клавиатура" class="header-anchor">#</a> Клавиатура</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> playerKeyboard <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vision-embedded-web'</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/vision-embedded-web-docs/assets/js/app.daaba0a2.js" defer></script><script src="/vision-embedded-web-docs/assets/js/2.eeb24f79.js" defer></script><script src="/vision-embedded-web-docs/assets/js/12.0c4596fd.js" defer></script>
  </body>
</html>
