(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{283:function(t,s,a){"use strict";a.r(s);var r=a(14),e=Object(r.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"интерфеисы"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#интерфеисы"}},[t._v("#")]),t._v(" Интерфейсы")]),t._v(" "),s("h2",{attrs:{id:"cubicplayer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cubicplayer"}},[t._v("#")]),t._v(" CubicPlayer")]),t._v(" "),s("p",[t._v("Плеер CubicVision должен определять объект window.CubicPlayer на встраиваемой веб странице. Интерфейс должен включать следующие методы:")]),t._v(" "),s("h3",{attrs:{id:"событие-готовности-веб-контента"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#событие-готовности-веб-контента"}},[t._v("#")]),t._v(" Событие готовности веб контента")]),t._v(" "),s("p",[t._v("Веб контент вызывает этот метод, когда все обработчики window.WebContent зарегистрированы и готовы к работе")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onWebContentReady")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v("\n")])])]),s("p",[t._v("После этого можно вызывать методы у window.WebContent")]),t._v(" "),s("h3",{attrs:{id:"работа-с-хранилищем-данных"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#работа-с-хранилищем-данных"}},[t._v("#")]),t._v(" Работа с хранилищем данных")]),t._v(" "),s("p",[s("strong",[t._v("getStoreValue")]),s("br"),t._v("\nМетод для получения ранее сохранённых данных из стора плеера")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getStoreValue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("ul",[s("li",[s("strong",[t._v("key")]),t._v(" - "),s("em",[t._v("Уникальный ключ ассоцируемый с данными")])]),t._v(" "),s("li",[s("em",[t._v("Возвращает JSON строку с данными или Promise c тем же результатом")])]),t._v(" "),s("li",[t._v("Если данные в хранилище не найдены, необходимо возвращать: "),s("code",[t._v("'null'")])]),t._v(" "),s("li",[t._v("В сторе могут храниться только строки в формате JSON")])]),t._v(" "),s("p",[s("strong",[t._v("saveStoreValue")]),s("br"),t._v("\nМетод для сохранения данных в сторе плеера")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("saveStoreValue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useAfterRepublishing"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("ul",[s("li",[s("strong",[t._v("key")]),t._v(" - "),s("em",[t._v("Уникальный ключ ассоцируемый с данными")])]),t._v(" "),s("li",[s("strong",[t._v("value")]),t._v(" - "),s("em",[t._v("Строка в формате JSON (данные)")])]),t._v(" "),s("li",[s("strong",[t._v("useAfterRepublishing")]),t._v(" - "),s("em",[t._v("Должны ли данные очищаться после того как переопубликуют шаблон в CMS. true - не должны очищаться, false - должны очищаться. Если третий параметр отсутствует, считать, что передан false")])]),t._v(" "),s("li",[s("em",[t._v("Возвращает void или Promise c тем типом")])]),t._v(" "),s("li",[t._v("Сразу после того, как будет вызвана функция, данные в сторе должны измениться")]),t._v(" "),s("li",[t._v("В сторе могут храниться только строки в формате JSON")])]),t._v(" "),s("h3",{attrs:{id:"переход-между-сценами"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#переход-между-сценами"}},[t._v("#")]),t._v(" Переход между сценами")]),t._v(" "),s("p",[s("strong",[t._v("goToScene")]),s("br"),t._v("\nМетод для переключения сцены")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("goToScene")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sceneId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v("\n")])])]),s("ul",[s("li",[s("strong",[t._v("sceneId")]),t._v(" - "),s("em",[t._v("Id сцены, на которую нужно перейти")])])]),t._v(" "),s("p",[s("strong",[t._v("goToPreviousScene")]),s("br"),t._v("\nМетод для перехода на предыдущую сцену")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("goToPreviousScene")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v("\n")])])]),s("ul",[s("li",[t._v("Плеер должен хранить id предыдущей сцены и осуществлять переход на эту сцену. Если предыдущей сцены не было, то ничего не делать.")]),t._v(" "),s("li",[t._v("Если были на первой сцене с id 0, то метод ничего не делает. Если затем перешли на сцену с id 1, и вызвали метод, то вернуться на сцену с id 0. Если вызывать метод ещё раз, ничего не делать, не нужно опять возвразаться на сцену с id 1.")])]),t._v(" "),s("h3",{attrs:{id:"логирование"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#логирование"}},[t._v("#")]),t._v(" Логирование")]),t._v(" "),s("p",[s("strong",[t._v("writeLogToFile")]),s("br"),t._v("\nМетод для записи лога в файл")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeLogToFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("logType"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" logText"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v("\n")])])]),s("ul",[s("li",[s("strong",[t._v("logType")]),t._v(" - "),s("em",[t._v("'debug' | 'info' | 'error' | 'warning' (возможные значения)")])]),t._v(" "),s("li",[s("strong",[t._v("logText")]),t._v(" - "),s("em",[t._v("текст лога для записи")])]),t._v(" "),s("li",[t._v("Лог записывается новой строчкой в файл логов за текущий день")])]),t._v(" "),s("h3",{attrs:{id:"контеинеры"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#контеинеры"}},[t._v("#")]),t._v(" Контейнеры")]),t._v(" "),s("p",[s("strong",[t._v("changeContainersPlayback")]),s("br"),t._v("\nИзменение проигрываемого контена в контейнерах")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("changeContainersPlayback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("command"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pause'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'resume'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'reset'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'recordFinish'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v("\n")])])]),s("ul",[s("li",[s("strong",[t._v("command")]),t._v(" - "),s("em",[t._v("команда для изменения проигрываемого контента: 'pause' - удалить элементы из контейнера, приостановить воспроизведение; 'resume' - возобновить воспроизведение со следующего элемента контейнера; 'reset' - искать следующий элемент с начала списка воспроизведения; 'recordFinish' - занести запись об окончании проигрывания в журнал статистики.")])])]),t._v(" "),s("h3",{attrs:{id:"приложение"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#приложение"}},[t._v("#")]),t._v(" Приложение")]),t._v(" "),s("p",[s("strong",[t._v("changeAppVisibility")]),s("br"),t._v("\nИзменение видимость приложения")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("changeAppVisibility")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("visible"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v("\n")])])]),s("ul",[s("li",[s("strong",[t._v("visible")]),t._v(" - "),s("em",[t._v("должно ли отображаться приложение поверх другого контента, если значение false, то приложение должно быть скрыто или свёрнуто и находиться на заднем плане")])])]),t._v(" "),s("p",[s("strong",[t._v("getAppVisibility")]),s("br"),t._v("\nПолучение видимости приложения")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAppVisibility")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("p",[s("strong",[t._v("getAppDataPath")]),s("br"),t._v("\nПолучить путь к папке данных плеера. Это корневая папка в которой хранится расписание, скачанные файлы и тд.\nВозвращаемый путь должен быть в формате Unix path (using a '/' as separator).")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAppDataPath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("h3",{attrs:{id:"фаиловая-система"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#фаиловая-система"}},[t._v("#")]),t._v(" Файловая система")]),t._v(" "),s("p",[s("strong",[t._v("findFileLine")]),s("br"),t._v("\nНайти строчку в файле, удовлетворяющей поисковому запросу")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("findFileLine")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filePath"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" search"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'contains'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'startsWith'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'endsWith'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fromEnd"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("ul",[s("li",[s("strong",[t._v("filePath")]),t._v(" - "),s("em",[t._v("путь к файлу")])]),t._v(" "),s("li",[s("strong",[t._v("search")]),t._v(" - "),s("em",[t._v("поисковая строка, если пустая, то вернуть первую строку")])]),t._v(" "),s("li",[s("strong",[t._v("type")]),t._v(" - "),s("em",[t._v("'contains' - искать строку, которая содержит "),s("strong",[t._v("search")]),t._v("; 'startsWith' - начинается с "),s("strong",[t._v("search")]),t._v(", 'endsWith' - заканчивается на "),s("strong",[t._v("search")])])]),t._v(" "),s("li",[s("strong",[t._v("fromEnd")]),t._v(" - "),s("em",[t._v("искать с конца файла")])])]),t._v(" "),s("p",[s("strong",[t._v("readDirectory")]),s("br"),t._v("\nПолучить список названий файлов и папок для заданной директории."),s("br"),t._v("\nВозвращаемый результат - json строка, массив с названиями файлов и папок.")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("Пример"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" '"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"medias"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"schedule.json"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("'\n")])])]),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("readDirectory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dirPath"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ul",[s("li",[s("strong",[t._v("dirPath")]),t._v(" - "),s("em",[t._v("путь к директории, для которой нужно получить список названий файлов и папок")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);